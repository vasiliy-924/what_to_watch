from flask import Flask, jsonify
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///db.sqlite3'
app.json.ensure_ascii = False 
db = SQLAlchemy(app)


class Story(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(128), nullable=False)
    text = db.Column(db.Text, unique=True, nullable=False)

@app.route('/')
def index_view():
    stories = Story.query.all()
    # Вариант A: единый объект { "1": "текст1", "2": "текст2", ... } — соответствует вашему примеру
    result = {str(story.id): story.text for story in stories}
    return jsonify(result)

    # Если бы вы хотели именно список словарей — можно было бы вернуть:
    # result_list = [{str(story.id): story.text} for story in stories]
    # return jsonify(result_list)


@app.route('/add')
def add_view():
    return 'Это страница для добавления рассказа'


@app.route('/story')
def random_story_view():
    return 'Это страница со случайным рассказом'


убедитесь что список который выводится на главной странице содержит словари ключами которых являются id каждого рассказа а значениями - тексты рассказов
{ "1": "— Итак, коллеги, начну с очень важного объявления.\nВсе замерли. Техлид поправил на носу очки и продолжил:\n— Сегодня мы запускаем эксперимент, о котором говорят вот уже почти две тысячи лет и которого ждала вся планета: «обезьяны за пишущей машинкой». Согласно теории, к концу вечности (или чуть раньше) эти обезьяны, беспорядочно колотя по клавишам, способны напечатать текст «Гамлета». Вот и проверим.\nПосыпались вопросы.\n— А где мы их будем держать?\n— А кормить их чем?\n— А можно одну взять домой? А то мой котик скучает!\n— Никаких обезьян не будет. Напишем и запустим рандом-генераторы. Проверять их работу будем по протоколу IMPS (The Infinite Monkey Protocol Suite), описанному в RSF 2795. Если вопросов больше нет — можно приступать. ТЗ у вас на почте, стандарт RSF 2795 найдёте сами.\n...неделю спустя к техлиду подошёл озадаченный стажёр — его назначили отслеживать работу электронных обезьян.\n— Думаю, тебе надо на это посмотреть, — шёпотом сказал стажёр.\n— Что, они написали «Быть иль не быть»?!\n— Нет. Никакого Гамлета. Похоже, они ушли в рекурсию: вместо Гамлета один из генераторов напечатал кусок из «Автостопом по Галактике», причём именно тот, где речь идёт об обезьянах.\n— Что? Покажи!\nВ терминале появились строки:\n«— Форд! — выговорил он, — там, снаружи, бесконечно много обезьян. И они хотят»\nМерцающий курсор сдвинулся, дописывая конец фразы:\n«обсудить с нами \"Гамлета\", который у них получился.»", "2": "— Еще одно, последнее сказанье — и летопись окончена моя. Исполнен долг, завещаный техлидом, — несколько патетически продекламировал Антон, дописывая последние строки кода.\nПредполагалось, что его программа должна стать уникальным распределённым браузером-поисковиком.\nКлонировав себя на сотни тысяч серверов, эта программа получала прямой доступ ко всем открытым данным, отслеживала изменения в реальном времени и предлагала пользователям доступ к самой актуальной информации. Ни Boogle, ни Yehoohoo такое даже не снилось.\nMVP готова, можно проверять!\n— Ну что, запускаем?\n— Запускаем, — кивнул техлид.\nEnter.\n— Стоп. А тесты как прошли?\n— Никак: последнюю версию я не тестировал. Но видишь, работает же!\nКоллеги-разработчики за соседними столами внезапно зашевелились, все одновременно. \n— Эй, а что с сетью? \n— Где связь? \n— Куда дели коннект?! \n— Мобильного интернета тоже нет... \nАнтон вжался в кресло. «Не может быть, это не я, это просто совпадение!».\n— Коллеги, а что такое Error 606? Никогда такого не видел! \"Internet not found\" — как это?\nТехлид побледнел.\n— Антон, твоя прога удалила весь Интернет. Сервера есть, данные есть, а связи нет. Выведи логи на экран.\nАнтон набрал пару команд — и в терминале развернулась лента с логами.\n— Пора искать новую работу, где-то в оффлайне, — безо всяких интонаций произнёс техлид.\n— Я неплохо знаю город, могу емейлы развозить. На самокате.\nПоследняя строка в логах сообщала:\nError 606: Internet not found. It's the last message on the Internet. Thank you for deleting this global net.", "3": "Есть одно древнее предание. Давным-давно, в первые дни существования GitHub, там появился Репозиторий Времени. Мало кто знает, кто его автор, где расположен тот репозиторий и как его найти, а кто знает — тот молчит.\nКто найдёт тот репозиторий и предложит в него PR, и если этот PR будет принят — то счастливчик обретёт силу управлять временем.\nК какому коммиту откатишься — к тому моменту времени и вернёшься.\nИ вот многие годы разработчики рыскают по GitHub, ищут Репозиторий Времени, да никто не находит.\nГоворят, был один Юный Разработчик, что нашёл Репозиторий и был допущен к нему. С тех пор никто его не видел: Юный Разработчик откатился на коммит, созданный до его рождения. Этот парадокс не был предусмотрен в коде.\nИ до тех пор, пока не будет патча, предстоит скитаться Юному Разработчику в коде межвременья.\nТак говорит древнее предание.", "4": "В 1834 году британские археологи обнаружили в Египте таинственный артефакт, который, по их мнению, принадлежал неизвестной цивилизации. Странный предмет, украшенный загадочными символами, был найден в скрытой камере пирамиды. Больше полутора веков исследователи пытались расшифровать эти знаки.\nЛишь в 1998 году один веб-разработчик, случайно увидевший этот артефакт в музее, воскликнул «Ну надо же, и у них кодировка слетела!».\nОказалось, что странные символы м╔О┼нМнОН└ О┴М, ┌┼═╠Л╬┼ означали всего лишь приветствие от инопланетного разума: \"Приветствую вас, земляне\", но в битой кодировке CP855.\nТак человечество впервые узнало, что сбой кодировки — это проблема галактического масштаба.", "5": "На бескрайних ледяных просторах Антарктиды когда-то жили пингвины.Они неуклюже ходили по промороженной суше, ныряли за рыбой... но извечный холод, мёрзлая земля и сплошные камни приводили многих из них в уныние.\nОдин из пингвинов, смелый и любопытный Диль, подговорил приятелей на отчаянный шаг. Весь полярный день они тренировались — сутками не вылезали из воды, ныряли всё глубже, заплывали всё дальше... А когда стало полярно вечереть — они обнялись с родными и отправились в путь, в тёплые края, на север.\nТела путешественников постепенно менялись. Перья слиплись и превратились в гладкую кожу, крылья стали плавниками, неуклюжие лапки трансформировались в мощный хвост, а клюв — в зубастую пасть. Но они не растеряли и пингвинью сущность — расцветка и любовь к рыбе, весёлые прыжки в воде и любопытство — всё осталось при них.\nЧерез несколько месяцев путешествий по бурным морям к берегам Африки подплыла первая в истории стая дИльфинов — именно так они решили себя называть, в честь пингвина Диля.\nГораздо позже, уже после появления человечества, название трансформировалось в привычное нам слово «дельфин»." }
